
\begin{tikzpicture}
\begin{scope}
\node[palette1, anchor = east] at (6, -2.3) {Nodo NUMA 0};
\draw[palette1, fill = palette1, fill opacity = 0.1] (0, -2) rectangle (6,2);
\draw[fill = white] (5.5, 1.2) rectangle (3.9, -1.2);
\draw (4.7, 1.2) -- (4.7, -1.2);
\draw (5.5, 0.4) -- (3.9, 0.4);
\draw (5.5, -0.4) -- (3.9, -0.4);

\foreach[count = \iy] \y in {0.8, 0, -0.8} {
	\foreach[count = \ix] \x in {4.3, 5.1} {
		\pgfmathsetmacro{\nodename}{2 * (\iy - 1) + \ix - 1}
		\node at (\x, \y) {\pgfmathprintnumber[int trunc]{\nodename}};
	}
}

\node at (4.7, 1.43) {CPU 0};

\draw[palette1, fill = palette1, fill opacity = 0.4] (0.2, 1.8) rectangle (1.8, -1.8);
\node[align = center] at (1, 0) {Memoria \\ local \\ nodo 0};

\fill[palette1, pattern = north east lines] (1.8, -0.6) rectangle (3.9, 0.6);
\node at (2.85, -0.8) {Bus local};

\node[draw, rectangle, minimum width = 2cm, minimum height = 1cm] (NIC) at (2.85, 3) {NIC};
\draw[very thick] (2.85, 0.6) -- (NIC);
\end{scope}

\begin{scope}[xshift = 14cm, xscale = -1]
\node[palette2, anchor = west] at (6, -2.3) {Nodo NUMA 1};
\draw[palette2, fill = palette2, fill opacity = 0.1] (0, -2) rectangle (6,2);
\draw[fill = white] (5.5, 1.2) rectangle (3.9, -1.2);
\draw (4.7, 1.2) -- (4.7, -1.2);
\draw (5.5, 0.4) -- (3.9, 0.4);
\draw (5.5, -0.4) -- (3.9, -0.4);

\foreach[count = \iy] \y in {0.8, 0, -0.8} {
	\foreach[count = \ix] \x in {5.1, 4.3} {
		\pgfmathsetmacro{\nodename}{2 * (\iy - 1) + \ix - 1}
		\node at (\x, \y) {\pgfmathprintnumber[int trunc]{\nodename}};
	}
}

\node at (4.7, 1.43) {CPU 1};

\draw[palette2, fill = palette2, fill opacity = 0.4] (0.2, 1.8) rectangle (1.8, -1.8);
\node[align = center] at (1, 0) {Memoria \\ local \\ nodo 1};

\fill[palette2, pattern = north west lines] (1.8, -0.6) rectangle (3.9, 0.6);
\node at (2.85, -0.8) {Bus local};


\node[draw, rectangle, minimum width = 2cm, minimum height = 1cm] (RAID) at (2.85, 3) {RAID};
\draw[very thick] (2.85, 0.6) -- (RAID);
\end{scope}

\fill[gray, opacity = 0.2] (5.5, 0.3) rectangle (8.5, -0.3);
\fill[pattern = horizontal lines, pattern color = gray] (5.5, 0.3) rectangle (8.5, -0.3);
\node at (7, -0.45) {\small Interconexi\'on};
\end{tikzpicture}
